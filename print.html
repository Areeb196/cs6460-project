<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Learn Rust&#x27;s Borrowing Rules</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="chapter-item expanded "><a href="basics.html"><strong aria-hidden="true">1.</strong> Basics</a></li><li class="chapter-item expanded "><a href="example.html"><strong aria-hidden="true">2.</strong> Rust Borrowing Example</a></li><li class="chapter-item expanded "><a href="problem.html"><strong aria-hidden="true">3.</strong> Problem</a></li><li class="chapter-item expanded "><a href="td-bkt.html"><strong aria-hidden="true">4.</strong> Skill Graph</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Learn Rust&#x27;s Borrowing Rules</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>The purpose of this platform is to help people strengthen their understanding of Rust's safety mechanisms and be able to write code using these rules more confidently. The learning plan is below:</p>
<ol>
<li><a href="basics.html">Rust Basics</a></li>
<li><a href="./example.html">Rust Borrowing Example</a></li>
<li><a href="./problem.html">Problem</a></li>
<li><a href="./td-bkt.html">Skill Graph</a></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basics"><a class="header" href="#basics">Basics</a></h1>
<p>This platform assumes you have programmed before and the purpose is not to teach everything about Rust. Instead the focus is on understanding borrowing and ownership. There are other safety mechanisms to follow but a starting point must be made somewhere.</p>
<p>Reference <a href="https://doc.rust-lang.org/stable/book/">https://doc.rust-lang.org/stable/book/</a> for understanding the basics of Rust. This page will emphasize simple safety mechanisms like borrowing and ownership.</p>
<h2 id="mutability"><a class="header" href="#mutability">Mutability</a></h2>
<p>The code below should give an error because <code>x</code> is immutable</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x: i32 = 3;
x = 5; // should give an error
<span class="boring">}</span></code></pre></pre>
<p>To fix the error, make the variable mutable with <code>mut</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut x: i32 = 3;
x = 5; // no error
<span class="boring">}</span></code></pre></pre>
<h2 id="ownership"><a class="header" href="#ownership">Ownership</a></h2>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hi");
let x = s;
println!("{s}"); // will give an error
<span class="boring">}</span></code></pre></pre>
<p>Doing a <code>clone</code> will remove the error.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hi");
let x = s.clone();
println!("{s}, {x}"); // will not give an error
<span class="boring">}</span></code></pre></pre>
<h2 id="references-and-borrowing"><a class="header" href="#references-and-borrowing">References and Borrowing</a></h2>
<p>The main points to remember are:</p>
<ul>
<li>At any given time, you can have either one mutable reference or any number of immutable references.</li>
<li>References must always be valid.</li>
</ul>
<p>To make a reference use a <code>&amp;</code> in front of the variable.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let s = String::from("hi");
let x = &amp;s;
let y = &amp;s;
println!("{s}, {x}, {y}");
<span class="boring">}</span></code></pre></pre>
<p>Creating a reference is called borrowing because basically a reference is borrowing the data from that variable. Any number immutable references can be made. But only one mutable reference can exist. If a mutable reference exists, then no other borrowing can occur.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut s = String::from("hi");
let x = &amp;mut s;
let y = &amp;mut s;
println!("{s}, {x}, {y}"); // error
<span class="boring">}</span></code></pre></pre>
<p>A mutable reference can be done correctly like this:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut s = String::from("hi");
let x = &amp;mut s;
x.push_str("!!!");
println!("{s}");
<span class="boring">}</span></code></pre></pre>
<p>Also dangling references are mentioned in the book with this example.</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let reference_to_nothing = dangle();
}

fn dangle() -&gt; &amp;String {
    let s = String::from("hello");

    &amp;s
}</code></pre></pre>
<p>The return value cannot be a reference. The correct way to write this code would be to return <code>String</code> instead of <code>&amp;String</code>.</p>
<h2 id="whats-next"><a class="header" href="#whats-next">What's next</a></h2>
<p>If more information is needed, read through the first four chapters of the book. Look at the next page for a hands-on example on borrowing.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-borrowing-example"><a class="header" href="#rust-borrowing-example">Rust Borrowing Example</a></h1>
<p>This example was taken from <a href="https://doc.rust-lang.org/stable/rust-by-example/scope/borrow.html">https://doc.rust-lang.org/stable/rust-by-example/scope/borrow.html</a>.</p>
<pre><pre class="playground"><code class="language-rust editable">// This function takes ownership of a box and destroys it
fn eat_box_i32(boxed_i32: Box&lt;i32&gt;) {
    println!("Destroying box that contains {}", boxed_i32);
}

// This function borrows an i32
fn borrow_i32(borrowed_i32: &amp;i32) {
    println!("This int is: {}", borrowed_i32);
}

fn main() {
    // Create a boxed i32 in the heap, and a i32 on the stack
    // Remember: numbers can have arbitrary underscores added for readability
    // 5_i32 is the same as 5i32
    let boxed_i32 = Box::new(5_i32);
    let stacked_i32 = 6_i32;

    // Borrow the contents of the box. Ownership is not taken,
    // so the contents can be borrowed again.
    borrow_i32(&amp;boxed_i32);
    borrow_i32(&amp;stacked_i32);

    {
        // Take a reference to the data contained inside the box
        let _ref_to_i32: &amp;i32 = &amp;boxed_i32;

        // Error!
        // Can't destroy `boxed_i32` while the inner value is borrowed later in scope.
        eat_box_i32(boxed_i32);
        // FIXME ^ Comment out this line

        // Attempt to borrow `_ref_to_i32` after inner value is destroyed
        borrow_i32(_ref_to_i32);
        // `_ref_to_i32` goes out of scope and is no longer borrowed.
    }

    // `boxed_i32` can now give up ownership to `eat_box_32` and be destroyed
    eat_box_i32(boxed_i32);
}</code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="problem"><a class="header" href="#problem">Problem</a></h1>
<p>This problem is for tracking your borrowing skills. Write code to solve the problem. As you're writing code, your skills are tracked.</p>
<h2 id="prompt"><a class="header" href="#prompt">Prompt</a></h2>
<p>Given a list of integers, implement a function <code>find_max_min_diff</code> that returns the difference between the maximum and minimum values in the list. You are not allowed to sort the list or use any built-in sorting/max/min functions.</p>
<p>Constraints:</p>
<ul>
<li>The list <code>nums</code> will not be empty and will contain at least two elements.</li>
<li>The elements in <code>nums</code> will fit within the range of 32-bit signed integers (i32).</li>
</ul>
<p>Press the <code>Start</code> button to begin knowledge tracing. You have 15 minutes to complete the problem. A timer will be displayed below when tracing begins. If you're done before 15 minutes, press <code>Done</code> to see the borrowing skill graph on the next page.</p>
<script src="js/problem.js"></script>
<p><button onclick="start()">Start</button></p>
<h2 id="your-solution"><a class="header" href="#your-solution">Your Solution</a></h2>
<pre><pre class="playground"><code class="language-rust editable">fn find_max_min_diff(nums: &amp;[i32]) -&gt; i32 {
    // Your implementation here
}

fn main() {
    assert_eq!(find_max_min_diff(&amp;[4, 1, 9, 3, 5]), 8);
    assert_eq!(find_max_min_diff(&amp;[2, 8, 7, 1, 5, 3]), 7);
}</code></pre></pre>
<p><button onclick="done()">Done</button></p>
<div class="timer" id="timer" style="display:none;"></div>
<!-- fn find_max_min_diff(nums: &[i32]) -> i32 {
    // Initialize min and max with the first element
    let mut min = nums[0];
    let mut max = nums[0];
    
    // Iterate through the rest of the elements
    for &num in nums.iter().skip(1) {
        if num < min {
            min = num; // Update minimum if found a smaller value
        } else if num > max {
            max = num; // Update maximum if found a larger value
        }
    }
    
    // Calculate and return the difference
    max - min
} -->
<div style="break-before: page; page-break-before: always;"></div><h1 id="skill-graph"><a class="header" href="#skill-graph">Skill Graph</a></h1>
<div id="chart_div" style="width: 100%; height: 500px; margin: 0 auto;"></div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="js/skills.js"></script>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
